<!DOCTYPE html><!--EY6RXJ7iBLJBwJYLK0Qv9--><html lang="en"><head><meta charSet="utf-8"/><link rel="preconnect" href="/" crossorigin=""/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/blog/_next/static/chunks/7368a906573492f5.css" data-precedence="next"/><link rel="stylesheet" href="/blog/_next/static/chunks/ed4e68454ee06b1f.css" data-precedence="next"/><link rel="stylesheet" href="/blog/_next/static/chunks/33688e53a6216d98.css" data-precedence="next"/><link rel="stylesheet" href="/blog/_next/static/chunks/163f657a16afbe5e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/blog/_next/static/chunks/4e00f9a57b4e9fa9.js"/><script src="/blog/_next/static/chunks/da5ec90c81dee31e.js" async=""></script><script src="/blog/_next/static/chunks/9e20f0e85e7cc766.js" async=""></script><script src="/blog/_next/static/chunks/turbopack-fb03b01d1d2cb862.js" async=""></script><script src="/blog/_next/static/chunks/570aaa2383da98ee.js" async=""></script><script src="/blog/_next/static/chunks/6da248607049f835.js" async=""></script><title>Blog</title><meta name="description" content="Blog"/><script src="/blog/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><div class="markdown-body"><h1>Scraping 2 million web pages</h1>
<p>9/18/2025<br/>
<!-- -->Last edited: 11/2/2025</p>
<p><a href="/blog">Back to posts</a></p><ul>
<li><a href="#introduction" node="[object Object]">Introduction</a></li>
<li><a href="#rate-limits" node="[object Object]">Rate limits</a></li>
<li><a href="#initial-storage" node="[object Object]">Initial storage</a></li>
<li><a href="#compression" node="[object Object]">Compression</a></li>
<li><a href="#conclusion" node="[object Object]">Conclusion</a></li>
</ul>
<h1 id="introduction"><a href="#introduction" node="[object Object]">Introduction</a></h1>
<p>There was a site that I used often. One day, while other similar sites were being taken down, I had the idea to attempt to archive the entire site. Each &quot;entry&quot; was accessible through the link <!-- -->site.com/view/id<!-- -->, where the <!-- -->id<!-- --> was just a number incrementing from 1 to 2,000,000. I decided that I was going to use the best language for the job, which in my opinion is <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener noreferrer" node="[object Object]">JavaScript</a>. It is extremely versatile and has very little <a href="https://en.wikipedia.org/wiki/Boilerplate_code" target="_blank" rel="noopener noreferrer" node="[object Object]">boilerplate</a>, with good support for <a href="https://en.wikipedia.org/wiki/HTTP" target="_blank" rel="noopener noreferrer" node="[object Object]">HTTP</a> and the web (well it is after all, used in webpages).</p>
<h1 id="rate-limits"><a href="#rate-limits" node="[object Object]">Rate limits</a></h1>
<p>The moment of truth: was a simple <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer" node="[object Object]">fetch request</a> going to work? Usually, in the worst case scenario, you have to use some kind of webdriver (ex: <a href="https://github.com/SeleniumHQ/selenium" target="_blank" rel="noopener noreferrer" node="[object Object]">Selenium</a>) so that the scraper doesn&#x27;t get blocked. If a fetch request works, it will drastically simplify the scraper, since that will just download the entire <a href="https://en.wikipedia.org/wiki/HTML" target="_blank" rel="noopener noreferrer" node="[object Object]">HTML</a> content. To my surprise, a simple fetch request worked. For the rate limit, while I didn&#x27;t see any, I decided to limit it to 1 request per second (which is still quite a bit over the recommended 1 requests per 5 seconds). What choice do I have though? I don&#x27;t have access to proxies, so I can only run the scraper on one device.</p>
<p>Also, the website had <a href="https://en.wikipedia.org/wiki/DDoS" target="_blank" rel="noopener noreferrer" node="[object Object]">DDoS</a> protection, but it was unusually weak. During my testing, I only encountered it at the start, and all I had to do was to pass in a browser cookie I got when I opened the page in a browser. Even after 2 million requests, the DDoS protection did not trigger.</p>
<p>Running the scraper 24/7 for ~14 days was all it took to scrape the 2,000,000 pages. <!-- -->:)</p>
<h1 id="initial-storage"><a href="#initial-storage" node="[object Object]">Initial storage</a></h1>
<p>The initial form of storage was simply serializing the HTML string that is fetched into a <a href="https://en.wikipedia.org/wiki/JSON" target="_blank" rel="noopener noreferrer" node="[object Object]">JSON</a> string and storing it into a <a href="https://en.wikipedia.org/wiki/NDJSON" target="_blank" rel="noopener noreferrer" node="[object Object]">NDJSON</a> (newline delimited JSON file). Since the scraping was going to take a long, long time, I decided to make it interruptible. It was simply a terminal program, where pressing <!-- -->q<!-- --> will shut down the scraper gracefully<sup><a href="#user-content-fn-gsd" id="user-content-fnref-gsd" data-footnote-ref="" aria-describedby="footnote-label" node="[object Object]">1</a></sup>. I used a simple approach, where the scraper writes the next id to be scraped into <!-- -->start.txt<!-- -->. Conforming to NDJSON, I used <a href="https://en.wikipedia.org/wiki/Node.js" target="_blank" rel="noopener noreferrer" node="[object Object]">Node.js</a> file system function <!-- -->fs.appendFile<!-- --> to only append the part that is necessary. Overall, 2 million pages took up ~30 gb.</p>
<pre><span class="hljs-string">&quot;HTML for id 1&quot;</span>
<span class="hljs-string">&quot;HTML for id 2&quot;</span>
...
</pre>
<h1 id="compression"><a href="#compression" node="[object Object]">Compression</a></h1>
<p>For each page, around 90% of the content was the same as any other page. The navbar, header, footer, and most of the body (excluding unique user data) was the same. While I initially attempted using <a href="https://github.com/jsdom/jsdom" target="_blank" rel="noopener noreferrer" node="[object Object]">jsdom</a>, it was actually making everything so much more complex. Therefore, I opted to use a <a href="https://en.wikipedia.org/wiki/regex" target="_blank" rel="noopener noreferrer" node="[object Object]">regex</a> instead, testing my compression algorithm by checking if the original content is equal to the decompressed compressed string.</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>str</mtext><mo>=</mo><mi mathvariant="normal">decompress</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi mathvariant="normal">compress</mi><mo>⁡</mo><mo stretchy="false">(</mo><mtext>str</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>str</mtext><mo>=</mo><mtext>strs</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>for </mtext><mo stretchy="false">{</mo><mi>i</mi><mo>∣</mo><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mn>2</mn><mo separator="true">,</mo><mtext> ⁣</mtext><mn>000</mn><mo separator="true">,</mo><mtext> ⁣</mtext><mn>000</mn><mo stretchy="false">}</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
&amp;\text{str} = \operatorname{decompress}(\operatorname{compress}(\text{str})) \\
&amp;\text{str} = \text{strs}[i] \\
&amp;\text{for } \{ i \mid 1 \leq i \leq 2, \! 000, \! 000 \}
\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-3em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-1.5em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em"><span style="top:-4.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">str</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mop"><span class="mord mathrm">decompress</span></span><span class="mopen">(</span><span class="mop"><span class="mord mathrm">compress</span></span><span class="mopen">(</span><span class="mord text"><span class="mord">str</span></span><span class="mclose">))</span></span></span><span style="top:-3.16em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">str</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">strs</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span><span style="top:-1.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">for </span></span><span class="mopen">{</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:-0.1667em"></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:-0.1667em"></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">000</span><span class="mclose">}</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em"><span></span></span></span></span></span></span></span></span></span></span></span>
<p>Now, it only takes up 3 gb instead of 30gb, and the data was nicely parsed for analysis. By eliminating redundancy and only storing user data, I believe I arrived at a reasonably good solution. The entire 30gb <a href="https://en.wikipedia.org/wiki/database" target="_blank" rel="noopener noreferrer" node="[object Object]">database</a> (with HTMLs for 2,000,000 pages) can be restored from the 3gb database (with easy to <a href="https://en.wikipedia.org/wiki/datamine" target="_blank" rel="noopener noreferrer" node="[object Object]">datamine</a> JSONs), which I am really proud of.</p>
<h1 id="conclusion"><a href="#conclusion" node="[object Object]">Conclusion</a></h1>
<p>Overall, I am amazed that the 2,000,000 pages, which is almost 15 years of user posts, can be stored in 3gb. While this is a niche application for web scraping, this was a fun project to increase my technical skills. Web scraping is surprisingly useful, and I hope to explore scraping news (for <a href="https://en.wikipedia.org/wiki/sentiment_analysis" target="_blank" rel="noopener noreferrer" node="[object Object]">sentiment analysis</a>) and scraping financial data itself in the future.</p>
<section data-footnotes="" class="footnotes"><h2 class="sr-only" id="footnote-label"><a href="#footnote-label" node="[object Object]">Footnotes</a></h2>
<ol>
<li id="user-content-fn-gsd">
<p>Graceful shutdown is really hard to implement in Node.js. <a href="#user-content-fnref-gsd" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref" node="[object Object]">↩</a></p>
</li>
</ol>
</section></div><!--$--><!--/$--><script src="/blog/_next/static/chunks/4e00f9a57b4e9fa9.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[22983,[\"/blog/_next/static/chunks/570aaa2383da98ee.js\"],\"default\"]\n3:I[74492,[\"/blog/_next/static/chunks/570aaa2383da98ee.js\"],\"default\"]\n5:I[21911,[\"/blog/_next/static/chunks/570aaa2383da98ee.js\"],\"OutletBoundary\"]\n6:\"$Sreact.suspense\"\n8:I[21911,[\"/blog/_next/static/chunks/570aaa2383da98ee.js\"],\"ViewportBoundary\"]\na:I[21911,[\"/blog/_next/static/chunks/570aaa2383da98ee.js\"],\"MetadataBoundary\"]\nc:I[56820,[\"/blog/_next/static/chunks/570aaa2383da98ee.js\"],\"default\"]\n:HL[\"/blog/_next/static/chunks/7368a906573492f5.css\",\"style\"]\n:HC[\"/\",\"\"]\n:HL[\"/blog/_next/static/chunks/ed4e68454ee06b1f.css\",\"style\"]\n:HL[\"/blog/_next/static/chunks/33688e53a6216d98.css\",\"style\"]\n:HL[\"/blog/_next/static/chunks/163f657a16afbe5e.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"EY6RXJ7iBLJBwJYLK0Qv9\",\"c\":[\"\",\"p\",\"scraping\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"p\",{\"children\":[[\"id\",\"scraping\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/blog/_next/static/chunks/7368a906573492f5.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/blog/_next/static/chunks/ed4e68454ee06b1f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/blog/_next/static/chunks/33688e53a6216d98.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/blog/_next/static/chunks/163f657a16afbe5e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/blog/_next/static/chunks/6da248607049f835.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$6\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@7\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L8\",null,{\"children\":\"$@9\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"$6\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@b\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"title\",\"0\",{\"children\":\"Blog\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Blog\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"d:I[41845,[\"/blog/_next/static/chunks/6da248607049f835.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"markdown-body\",\"children\":[[[\"$\",\"h1\",\"h1-0\",{\"children\":\"Scraping 2 million web pages\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"9/18/2025\",[\"$\",\"br\",\"br-0\",{}],\"\\n\",\"Last edited: 11/2/2025\"]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"/blog\",\"children\":\"Back to posts\"}]}]],[[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#introduction\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#introduction\"},\"children\":[{\"type\":\"text\",\"value\":\"Introduction\",\"position\":{\"start\":{\"line\":1,\"column\":4,\"offset\":3},\"end\":{\"line\":1,\"column\":16,\"offset\":15}}}],\"position\":{\"start\":{\"line\":1,\"column\":3,\"offset\":2},\"end\":{\"line\":1,\"column\":32,\"offset\":31}}},\"children\":\"Introduction\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#rate-limits\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#rate-limits\"},\"children\":[{\"type\":\"text\",\"value\":\"Rate limits\",\"position\":{\"start\":{\"line\":2,\"column\":4,\"offset\":36},\"end\":{\"line\":2,\"column\":15,\"offset\":47}}}],\"position\":{\"start\":{\"line\":2,\"column\":3,\"offset\":35},\"end\":{\"line\":2,\"column\":30,\"offset\":62}}},\"children\":\"Rate limits\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#initial-storage\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#initial-storage\"},\"children\":[{\"type\":\"text\",\"value\":\"Initial storage\",\"position\":{\"start\":{\"line\":3,\"column\":4,\"offset\":67},\"end\":{\"line\":3,\"column\":19,\"offset\":82}}}],\"position\":{\"start\":{\"line\":3,\"column\":3,\"offset\":66},\"end\":{\"line\":3,\"column\":38,\"offset\":101}}},\"children\":\"Initial storage\"}]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#compression\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#compression\"},\"children\":[{\"type\":\"text\",\"value\":\"Compression\",\"position\":{\"start\":{\"line\":4,\"column\":4,\"offset\":106},\"end\":{\"line\":4,\"column\":15,\"offset\":117}}}],\"position\":{\"start\":{\"line\":4,\"column\":3,\"offset\":105},\"end\":{\"line\":4,\"column\":30,\"offset\":132}}},\"children\":\"Compression\"}]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#conclusion\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#conclusion\"},\"children\":[{\"type\":\"text\",\"value\":\"Conclusion\",\"position\":{\"start\":{\"line\":5,\"column\":4,\"offset\":137},\"end\":{\"line\":5,\"column\":14,\"offset\":147}}}],\"position\":{\"start\":{\"line\":5,\"column\":3,\"offset\":136},\"end\":{\"line\":5,\"column\":28,\"offset\":161}}},\"children\":\"Conclusion\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",\"h1-0\",{\"id\":\"introduction\",\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#introduction\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#introduction\"},\"children\":[{\"type\":\"text\",\"value\":\"Introduction\",\"position\":{\"start\":{\"line\":7,\"column\":3,\"offset\":167},\"end\":{\"line\":7,\"column\":15,\"offset\":179}}}]},\"children\":\"Introduction\"}]}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"There was a site that I used often. One day, while other similar sites were being taken down, I had the idea to attempt to archive the entire site. Each \\\"entry\\\" was accessible through the link \",[\"$\",\"$Ld\",\"code-0\",{\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{},\"children\":[{\"type\":\"text\",\"value\":\"site.com/view/id\",\"position\":{\"start\":{\"line\":8,\"column\":194,\"offset\":374},\"end\":{\"line\":8,\"column\":212,\"offset\":392}}}],\"position\":{\"start\":{\"line\":8,\"column\":194,\"offset\":374},\"end\":{\"line\":8,\"column\":212,\"offset\":392}}},\"children\":\"site.com/view/id\"}],\", where the \",[\"$\",\"$Ld\",\"code-1\",{\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{},\"children\":[{\"type\":\"text\",\"value\":\"id\",\"position\":{\"start\":{\"line\":8,\"column\":224,\"offset\":404},\"end\":{\"line\":8,\"column\":228,\"offset\":408}}}],\"position\":{\"start\":{\"line\":8,\"column\":224,\"offset\":404},\"end\":{\"line\":8,\"column\":228,\"offset\":408}}},\"children\":\"id\"}],\" was just a number incrementing from 1 to 2,000,000. I decided that I was going to use the best language for the job, which in my opinion is \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.wikipedia.org/wiki/JavaScript\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/JavaScript\"},\"children\":[{\"type\":\"text\",\"value\":\"JavaScript\",\"position\":{\"start\":{\"line\":8,\"column\":370,\"offset\":550},\"end\":{\"line\":8,\"column\":380,\"offset\":560}}}],\"position\":{\"start\":{\"line\":8,\"column\":369,\"offset\":549},\"end\":{\"line\":8,\"column\":423,\"offset\":603}}},\"children\":\"JavaScript\"}],\". It is extremely versatile and has very little \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://en.wikipedia.org/wiki/Boilerplate_code\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/Boilerplate_code\"},\"children\":[{\"type\":\"text\",\"value\":\"boilerplate\",\"position\":{\"start\":{\"line\":8,\"column\":472,\"offset\":652},\"end\":{\"line\":8,\"column\":483,\"offset\":663}}}],\"position\":{\"start\":{\"line\":8,\"column\":471,\"offset\":651},\"end\":{\"line\":8,\"column\":532,\"offset\":712}}},\"children\":\"boilerplate\"}],\", with good support for \",[\"$\",\"a\",\"a-2\",{\"href\":\"https://en.wikipedia.org/wiki/HTTP\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/HTTP\"},\"children\":[{\"type\":\"text\",\"value\":\"HTTP\",\"position\":{\"start\":{\"line\":8,\"column\":557,\"offset\":737},\"end\":{\"line\":8,\"column\":561,\"offset\":741}}}],\"position\":{\"start\":{\"line\":8,\"column\":556,\"offset\":736},\"end\":{\"line\":8,\"column\":598,\"offset\":778}}},\"children\":\"HTTP\"}],\" and the web (well it is after all, used in webpages).\"]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\"]]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"h1\",\"h1-1\",{\"id\":\"rate-limits\",\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#rate-limits\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#rate-limits\"},\"children\":[{\"type\":\"text\",\"value\":\"Rate limits\",\"position\":{\"start\":{\"line\":10,\"column\":3,\"offset\":838},\"end\":{\"line\":10,\"column\":14,\"offset\":849}}}]},\"children\":\"Rate limits\"}]}]\n"])</script><script>self.__next_f.push([1,"f:[\"$\",\"p\",\"p-1\",{\"children\":[\"The moment of truth: was a simple \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"},\"children\":[{\"type\":\"text\",\"value\":\"fetch request\",\"position\":{\"start\":{\"line\":11,\"column\":36,\"offset\":886},\"end\":{\"line\":11,\"column\":49,\"offset\":899}}}],\"position\":{\"start\":{\"line\":11,\"column\":35,\"offset\":885},\"end\":{\"line\":11,\"column\":110,\"offset\":960}}},\"children\":\"fetch request\"}],\" going to work? Usually, in the worst case scenario, you have to use some kind of webdriver (ex: \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://github.com/SeleniumHQ/selenium\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://github.com/SeleniumHQ/selenium\"},\"children\":[{\"type\":\"text\",\"value\":\"Selenium\",\"position\":{\"start\":{\"line\":11,\"column\":208,\"offset\":1058},\"end\":{\"line\":11,\"column\":216,\"offset\":1066}}}],\"position\":{\"start\":{\"line\":11,\"column\":207,\"offset\":1057},\"end\":{\"line\":11,\"column\":257,\"offset\":1107}}},\"children\":\"Selenium\"}],\") so that the scraper doesn't get blocked. If a fetch request works, it will drastically simplify the scraper, since that will just download the entire \",[\"$\",\"a\",\"a-2\",{\"href\":\"https://en.wikipedia.org/wiki/HTML\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/HTML\"},\"children\":[{\"type\":\"text\",\"value\":\"HTML\",\"position\":{\"start\":{\"line\":11,\"column\":410,\"offset\":1260},\"end\":{\"line\":11,\"column\":414,\"offset\":1264}}}],\"position\":{\"start\":{\"line\":11,\"column\":409,\"offset\":1259},\"end\":{\"line\":11,\"column\":451,\"offset\":1301}}},\"children\":\"HTML\"}],\" content. To my surprise, a simple fetch request worked. For the rate limit, while I didn't see any, I decided to limit it to 1 request per second (which is still quite a bit over the recommended 1 requests per 5 seconds). What choice do I have though? I don't have access to proxies, so I can only run the scraper on one device.\"]}]\n"])</script><script>self.__next_f.push([1,"10:[\"$\",\"p\",\"p-2\",{\"children\":[\"Also, the website had \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.wikipedia.org/wiki/DDoS\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/DDoS\"},\"children\":[{\"type\":\"text\",\"value\":\"DDoS\",\"position\":{\"start\":{\"line\":13,\"column\":24,\"offset\":1657},\"end\":{\"line\":13,\"column\":28,\"offset\":1661}}}],\"position\":{\"start\":{\"line\":13,\"column\":23,\"offset\":1656},\"end\":{\"line\":13,\"column\":65,\"offset\":1698}}},\"children\":\"DDoS\"}],\" protection, but it was unusually weak. During my testing, I only encountered it at the start, and all I had to do was to pass in a browser cookie I got when I opened the page in a browser. Even after 2 million requests, the DDoS protection did not trigger.\"]}]\n11:[\"$\",\"p\",\"p-3\",{\"children\":[\"Running the scraper 24/7 for ~14 days was all it took to scrape the 2,000,000 pages. \",[\"$\",\"$Ld\",\"code-0\",{\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{},\"children\":[{\"type\":\"text\",\"value\":\":)\",\"position\":{\"start\":{\"line\":15,\"column\":86,\"offset\":2044},\"end\":{\"line\":15,\"column\":90,\"offset\":2048}}}],\"position\":{\"start\":{\"line\":15,\"column\":86,\"offset\":2044},\"end\":{\"line\":15,\"column\":90,\"offset\":2048}}},\"children\":\":)\"}]]}]\n12:[\"$\",\"h1\",\"h1-2\",{\"id\":\"initial-storage\",\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#initial-storage\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#initial-storage\"},\"children\":[{\"type\":\"text\",\"value\":\"Initial storage\",\"position\":{\"start\":{\"line\":17,\"column\":3,\"offset\":2054},\"end\":{\"line\":17,\"column\":18,\"offset\":2069}}}]},\"children\":\"Initial storage\"}]}]\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"p\",\"p-4\",{\"children\":[\"The initial form of storage was simply serializing the HTML string that is fetched into a \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.wikipedia.org/wiki/JSON\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/JSON\"},\"children\":[{\"type\":\"text\",\"value\":\"JSON\",\"position\":{\"start\":{\"line\":18,\"column\":92,\"offset\":2162},\"end\":{\"line\":18,\"column\":96,\"offset\":2166}}}],\"position\":{\"start\":{\"line\":18,\"column\":91,\"offset\":2161},\"end\":{\"line\":18,\"column\":133,\"offset\":2203}}},\"children\":\"JSON\"}],\" string and storing it into a \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://en.wikipedia.org/wiki/NDJSON\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/NDJSON\"},\"children\":[{\"type\":\"text\",\"value\":\"NDJSON\",\"position\":{\"start\":{\"line\":18,\"column\":164,\"offset\":2234},\"end\":{\"line\":18,\"column\":170,\"offset\":2240}}}],\"position\":{\"start\":{\"line\":18,\"column\":163,\"offset\":2233},\"end\":{\"line\":18,\"column\":209,\"offset\":2279}}},\"children\":\"NDJSON\"}],\" (newline delimited JSON file). Since the scraping was going to take a long, long time, I decided to make it interruptible. It was simply a terminal program, where pressing \",[\"$\",\"$Ld\",\"code-0\",{\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{},\"children\":[{\"type\":\"text\",\"value\":\"q\",\"position\":{\"start\":{\"line\":18,\"column\":382,\"offset\":2452},\"end\":{\"line\":18,\"column\":385,\"offset\":2455}}}],\"position\":{\"start\":{\"line\":18,\"column\":382,\"offset\":2452},\"end\":{\"line\":18,\"column\":385,\"offset\":2455}}},\"children\":\"q\"}],\" will shut down the scraper gracefully\",[\"$\",\"sup\",\"sup-0\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#user-content-fn-gsd\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"id\":\"user-content-fnref-gsd\",\"data-footnote-ref\":\"\",\"aria-describedby\":\"footnote-label\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#user-content-fn-gsd\",\"id\":\"user-content-fnref-gsd\",\"dataFootnoteRef\":\"\",\"ariaDescribedBy\":[\"footnote-label\"]},\"children\":[{\"type\":\"text\",\"value\":\"1\"}],\"position\":{\"start\":{\"line\":18,\"column\":423,\"offset\":2493},\"end\":{\"line\":18,\"column\":429,\"offset\":2499}}},\"children\":\"1\"}]}],\". I used a simple approach, where the scraper writes the next id to be scraped into \",[\"$\",\"$Ld\",\"code-1\",{\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{},\"children\":[{\"type\":\"text\",\"value\":\"start.txt\",\"position\":{\"start\":{\"line\":18,\"column\":513,\"offset\":2583},\"end\":{\"line\":18,\"column\":524,\"offset\":2594}}}],\"position\":{\"start\":{\"line\":18,\"column\":513,\"offset\":2583},\"end\":{\"line\":18,\"column\":524,\"offset\":2594}}},\"children\":\"start.txt\"}],\". Conforming to NDJSON, I used \",[\"$\",\"a\",\"a-2\",{\"href\":\"https://en.wikipedia.org/wiki/Node.js\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/Node.js\"},\"children\":[{\"type\":\"text\",\"value\":\"Node.js\",\"position\":{\"start\":{\"line\":18,\"column\":556,\"offset\":2626},\"end\":{\"line\":18,\"column\":563,\"offset\":2633}}}],\"position\":{\"start\":{\"line\":18,\"column\":555,\"offset\":2625},\"end\":{\"line\":18,\"column\":603,\"offset\":2673}}},\"children\":\"Node.js\"}],\" file system function \",[\"$\",\"$Ld\",\"code-2\",{\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{},\"children\":[{\"type\":\"text\",\"value\":\"fs.appendFile\",\"position\":{\"start\":{\"line\":18,\"column\":625,\"offset\":2695},\"end\":{\"line\":18,\"column\":640,\"offset\":2710}}}],\"position\":{\"start\":{\"line\":18,\"column\":625,\"offset\":2695},\"end\":{\"line\":18,\"column\":640,\"offset\":2710}}},\"children\":\"fs.appendFile\"}],\" to only append the part that is necessary. Overall, 2 million pages took up ~30 gb.\"]}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"$Ld\",\"code-0\",{\"className\":\"hljs language-json\",\"node\":{\"type\":\"element\",\"tagName\":\"code\",\"properties\":{\"className\":[\"hljs\",\"language-json\"]},\"children\":[{\"type\":\"element\",\"tagName\":\"span\",\"properties\":{\"className\":[\"hljs-string\"]},\"children\":[{\"type\":\"text\",\"value\":\"\\\"HTML for id 1\\\"\"}]},{\"type\":\"text\",\"value\":\"\\r\\n\"},{\"type\":\"element\",\"tagName\":\"span\",\"properties\":{\"className\":[\"hljs-string\"]},\"children\":[{\"type\":\"text\",\"value\":\"\\\"HTML for id 2\\\"\"}]},{\"type\":\"text\",\"value\":\"\\r\\n...\\n\"}],\"position\":{\"start\":{\"line\":19,\"column\":1,\"offset\":2796},\"end\":{\"line\":23,\"column\":4,\"offset\":2847}}},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-string\",\"children\":\"\\\"HTML for id 1\\\"\"}],\"\\r\\n\",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-string\",\"children\":\"\\\"HTML for id 2\\\"\"}],\"\\r\\n...\\n\"]}]}]\n15:[\"$\",\"h1\",\"h1-3\",{\"id\":\"compression\",\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#compression\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#compression\"},\"children\":[{\"type\":\"text\",\"value\":\"Compression\",\"position\":{\"start\":{\"line\":25,\"column\":3,\"offset\":2853},\"end\":{\"line\":25,\"column\":14,\"offset\":2864}}}]},\"children\":\"Compression\"}]}]\n"])</script><script>self.__next_f.push([1,"16:[\"$\",\"p\",\"p-5\",{\"children\":[\"For each page, around 90% of the content was the same as any other page. The navbar, header, footer, and most of the body (excluding unique user data) was the same. While I initially attempted using \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/jsdom/jsdom\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://github.com/jsdom/jsdom\"},\"children\":[{\"type\":\"text\",\"value\":\"jsdom\",\"position\":{\"start\":{\"line\":26,\"column\":201,\"offset\":3066},\"end\":{\"line\":26,\"column\":206,\"offset\":3071}}}],\"position\":{\"start\":{\"line\":26,\"column\":200,\"offset\":3065},\"end\":{\"line\":26,\"column\":239,\"offset\":3104}}},\"children\":\"jsdom\"}],\", it was actually making everything so much more complex. Therefore, I opted to use a \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://en.wikipedia.org/wiki/regex\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/regex\"},\"children\":[{\"type\":\"text\",\"value\":\"regex\",\"position\":{\"start\":{\"line\":26,\"column\":326,\"offset\":3191},\"end\":{\"line\":26,\"column\":331,\"offset\":3196}}}],\"position\":{\"start\":{\"line\":26,\"column\":325,\"offset\":3190},\"end\":{\"line\":26,\"column\":369,\"offset\":3234}}},\"children\":\"regex\"}],\" instead, testing my compression algorithm by checking if the original content is equal to the decompressed compressed string.\"]}]\n"])</script><script>self.__next_f.push([1,"17:[\"$\",\"span\",\"span-0\",{\"className\":\"katex-display\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"katex\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",\"math-0\",{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"display\":\"block\",\"children\":[\"$\",\"semantics\",\"semantics-0\",{\"children\":[[\"$\",\"mtable\",\"mtable-0\",{\"rowspacing\":\"0.25em\",\"columnalign\":\"right left\",\"columnspacing\":\"0em\",\"children\":[[\"$\",\"mtr\",\"mtr-0\",{\"children\":[[\"$\",\"mtd\",\"mtd-0\",{\"children\":[\"$\",\"mstyle\",\"mstyle-0\",{\"scriptlevel\":\"0\",\"displaystyle\":\"true\",\"children\":[\"$\",\"mrow\",\"mrow-0\",{}]}]}],[\"$\",\"mtd\",\"mtd-1\",{\"children\":[\"$\",\"mstyle\",\"mstyle-0\",{\"scriptlevel\":\"0\",\"displaystyle\":\"true\",\"children\":[\"$\",\"mrow\",\"mrow-0\",{\"children\":[[\"$\",\"mrow\",\"mrow-0\",{}],[\"$\",\"mtext\",\"mtext-0\",{\"children\":\"str\"}],[\"$\",\"mo\",\"mo-0\",{\"children\":\"=\"}],[\"$\",\"mi\",\"mi-0\",{\"mathvariant\":\"normal\",\"children\":\"decompress\"}],[\"$\",\"mo\",\"mo-1\",{\"children\":\"⁡\"}],[\"$\",\"mo\",\"mo-2\",{\"stretchy\":\"false\",\"children\":\"(\"}],[\"$\",\"mi\",\"mi-1\",{\"mathvariant\":\"normal\",\"children\":\"compress\"}],[\"$\",\"mo\",\"mo-3\",{\"children\":\"⁡\"}],[\"$\",\"mo\",\"mo-4\",{\"stretchy\":\"false\",\"children\":\"(\"}],[\"$\",\"mtext\",\"mtext-1\",{\"children\":\"str\"}],[\"$\",\"mo\",\"mo-5\",{\"stretchy\":\"false\",\"children\":\")\"}],[\"$\",\"mo\",\"mo-6\",{\"stretchy\":\"false\",\"children\":\")\"}]]}]}]}]]}],[\"$\",\"mtr\",\"mtr-1\",{\"children\":[[\"$\",\"mtd\",\"mtd-0\",{\"children\":[\"$\",\"mstyle\",\"mstyle-0\",{\"scriptlevel\":\"0\",\"displaystyle\":\"true\",\"children\":[\"$\",\"mrow\",\"mrow-0\",{}]}]}],[\"$\",\"mtd\",\"mtd-1\",{\"children\":[\"$\",\"mstyle\",\"mstyle-0\",{\"scriptlevel\":\"0\",\"displaystyle\":\"true\",\"children\":[\"$\",\"mrow\",\"mrow-0\",{\"children\":[[\"$\",\"mrow\",\"mrow-0\",{}],[\"$\",\"mtext\",\"mtext-0\",{\"children\":\"str\"}],[\"$\",\"mo\",\"mo-0\",{\"children\":\"=\"}],[\"$\",\"mtext\",\"mtext-1\",{\"children\":\"strs\"}],[\"$\",\"mo\",\"mo-1\",{\"stretchy\":\"false\",\"children\":\"[\"}],[\"$\",\"mi\",\"mi-0\",{\"children\":\"i\"}],[\"$\",\"mo\",\"mo-2\",{\"stretchy\":\"false\",\"children\":\"]\"}]]}]}]}]]}],[\"$\",\"mtr\",\"mtr-2\",{\"children\":[[\"$\",\"mtd\",\"mtd-0\",{\"children\":[\"$\",\"mstyle\",\"mstyle-0\",{\"scriptlevel\":\"0\",\"displaystyle\":\"true\",\"children\":[\"$\",\"mrow\",\"mrow-0\",{}]}]}],[\"$\",\"mtd\",\"mtd-1\",{\"children\":[\"$\",\"mstyle\",\"mstyle-0\",{\"scriptlevel\":\"0\",\"displaystyle\":\"true\",\"children\":[\"$\",\"mrow\",\"mrow-0\",{\"children\":[[\"$\",\"mrow\",\"mrow-0\",{}],[\"$\",\"mtext\",\"mtext-0\",{\"children\":\"for \"}],[\"$\",\"mo\",\"mo-0\",{\"stretchy\":\"false\",\"children\":\"{\"}],[\"$\",\"mi\",\"mi-0\",{\"children\":\"i\"}],[\"$\",\"mo\",\"mo-1\",{\"children\":\"∣\"}],[\"$\",\"mn\",\"mn-0\",{\"children\":\"1\"}],[\"$\",\"mo\",\"mo-2\",{\"children\":\"≤\"}],[\"$\",\"mi\",\"mi-1\",{\"children\":\"i\"}],[\"$\",\"mo\",\"mo-3\",{\"children\":\"≤\"}],[\"$\",\"mn\",\"mn-1\",{\"children\":\"2\"}],[\"$\",\"mo\",\"mo-4\",{\"separator\":\"true\",\"children\":\",\"}],[\"$\",\"mtext\",\"mtext-1\",{\"children\":\" ⁣\"}],[\"$\",\"mn\",\"mn-2\",{\"children\":\"000\"}],[\"$\",\"mo\",\"mo-5\",{\"separator\":\"true\",\"children\":\",\"}],[\"$\",\"mtext\",\"mtext-2\",{\"children\":\" ⁣\"}],[\"$\",\"mn\",\"mn-3\",{\"children\":\"000\"}],[\"$\",\"mo\",\"mo-6\",{\"stretchy\":\"false\",\"children\":\"}\"}]]}]}]}]]}]]}],[\"$\",\"annotation\",\"annotation-0\",{\"encoding\":\"application/x-tex\",\"children\":\"\\\\begin{align*}\\n\u0026\\\\text{str} = \\\\operatorname{decompress}(\\\\operatorname{compress}(\\\\text{str})) \\\\\\\\\\n\u0026\\\\text{str} = \\\\text{strs}[i] \\\\\\\\\\n\u0026\\\\text{for } \\\\{ i \\\\mid 1 \\\\leq i \\\\leq 2, \\\\! 000, \\\\! 000 \\\\}\\n\\\\end{align*}\"}]]}]}]}],[\"$\",\"span\",\"span-1\",{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"base\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"strut\",\"style\":{\"height\":\"4.5em\",\"verticalAlign\":\"-2em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mtable\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"col-align-r\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"vlist\",\"style\":{\"height\":\"2.5em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"style\":{\"top\":\"-4.5em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"pstrut\",\"style\":{\"height\":\"2.84em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\"}]]}],[\"$\",\"span\",\"span-1\",{\"style\":{\"top\":\"-3em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"pstrut\",\"style\":{\"height\":\"2.84em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\"}]]}],[\"$\",\"span\",\"span-2\",{\"style\":{\"top\":\"-1.5em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"pstrut\",\"style\":{\"height\":\"2.84em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\"}]]}]]}],[\"$\",\"span\",\"span-1\",{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",\"span-1\",{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"vlist\",\"style\":{\"height\":\"2em\"},\"children\":[\"$\",\"span\",\"span-0\",{}]}]}]]}]}],[\"$\",\"span\",\"span-1\",{\"className\":\"col-align-l\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"vlist\",\"style\":{\"height\":\"2.5em\"},\"children\":[\"$L1c\",\"$L1d\",\"$L1e\"]}],\"$L1f\"]}],\"$L20\"]}]}]]}]}]]}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"18:[\"$\",\"p\",\"p-6\",{\"children\":[\"Now, it only takes up 3 gb instead of 30gb, and the data was nicely parsed for analysis. By eliminating redundancy and only storing user data, I believe I arrived at a reasonably good solution. The entire 30gb \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.wikipedia.org/wiki/database\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/database\"},\"children\":[{\"type\":\"text\",\"value\":\"database\",\"position\":{\"start\":{\"line\":34,\"column\":212,\"offset\":3784},\"end\":{\"line\":34,\"column\":220,\"offset\":3792}}}],\"position\":{\"start\":{\"line\":34,\"column\":211,\"offset\":3783},\"end\":{\"line\":34,\"column\":261,\"offset\":3833}}},\"children\":\"database\"}],\" (with HTMLs for 2,000,000 pages) can be restored from the 3gb database (with easy to \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://en.wikipedia.org/wiki/datamine\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/datamine\"},\"children\":[{\"type\":\"text\",\"value\":\"datamine\",\"position\":{\"start\":{\"line\":34,\"column\":348,\"offset\":3920},\"end\":{\"line\":34,\"column\":356,\"offset\":3928}}}],\"position\":{\"start\":{\"line\":34,\"column\":347,\"offset\":3919},\"end\":{\"line\":34,\"column\":397,\"offset\":3969}}},\"children\":\"datamine\"}],\" JSONs), which I am really proud of.\"]}]\n19:[\"$\",\"h1\",\"h1-4\",{\"id\":\"conclusion\",\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#conclusion\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#conclusion\"},\"children\":[{\"type\":\"text\",\"value\":\"Conclusion\",\"position\":{\"start\":{\"line\":36,\"column\":3,\"offset\":4011},\"end\":{\"line\":36,\"column\":13,\"offset\":4021}}}]},\"children\":\"Conclusion\"}]}]\n1a:[\"$\",\"p\",\"p-7\",{\"children\":[\"Overall, I am amazed that the 2,000,000 pages, which is almost 15 years of user posts, can be stored in 3gb. While this is a niche application for web scraping, this was a fun project to increase my technical skills. Web scraping is surprisingly useful, and I hope to explore scraping news (for \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.wikipedia.org/wiki/sentiment_analysis\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"https://en.wikipedia.org/wiki/sentiment_analysis\"},\"children\":[{\"type\":\"text\",\"value\":\"sentiment analysis\",\"position\":{\"start\":{\"line\":37,\"column\":297,\"offset\":4319},\"end\":{\"line\":37,\"column\":315,\"offset\":4337}}}],\"position\":{\"start\":{\"line\":37,\"column\":296,\"offset\":4318},\"end\":{\"line\":37,\"column\":366,\"offset\":4388}}},\"children\":\"sentiment analysis\"}],\") and scraping financial data itself in the future.\"]}]\n1b:[\"$\",\"section\",\"section-0\",{\"data-footnotes\":\"\",\"className\":\"footnotes\",\"children\":[[\"$\",\"h2\",\"h2-0\",{\"className\":\"sr-only\",\"id\":\"footnote-label\",\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"#footnote-label\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#footnote-label\"},\"children\":[{\"type\":\"text\",\"value\":\"Footnotes\"}]},\"children\":\"Footnotes\"}]}],\"\\n\",[\"$\",\"ol\",\"ol-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"id\":\"user-content-fn-gsd\",\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"Graceful shutdown is really hard to implement in Node.js. \",[\"$\",\"a\",\"a-0\",{\"href\":\"#user-content-fnref-gsd\",\"target\":\"$undefined\",\"rel\":\"$undefined\",\"data-footnote-backref\":\"\",\"aria-label\":\"Back to reference 1\",\"className\":\"data-footnote-backref\",\"node\":{\"type\":\"element\",\"tagName\":\"a\",\"properties\":{\"href\":\"#user-content-fnref-gsd\",\"dataFootnoteBackref\":\"\",\"ariaLabel\":\"Back to reference 1\",\"className\":[\"data-footnote-backref\"]},\"children\":[{\"type\":\"text\",\"value\":\"↩\"}]},\"children\":\"↩\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"1c:[\"$\",\"span\",\"span-0\",{\"style\":{\"top\":\"-4.66em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"mord\"}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord text\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord\",\"children\":\"str\"}]}],[\"$\",\"span\",\"span-2\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-3\",{\"className\":\"mrel\",\"children\":\"=\"}],[\"$\",\"span\",\"span-4\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-5\",{\"className\":\"mop\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord mathrm\",\"children\":\"decompress\"}]}],[\"$\",\"span\",\"span-6\",{\"className\":\"mopen\",\"children\":\"(\"}],[\"$\",\"span\",\"span-7\",{\"className\":\"mop\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord mathrm\",\"children\":\"compress\"}]}],[\"$\",\"span\",\"span-8\",{\"className\":\"mopen\",\"children\":\"(\"}],[\"$\",\"span\",\"span-9\",{\"className\":\"mord text\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord\",\"children\":\"str\"}]}],[\"$\",\"span\",\"span-10\",{\"className\":\"mclose\",\"children\":\"))\"}]]}]]}]\n1d:[\"$\",\"span\",\"span-1\",{\"style\":{\"top\":\"-3.16em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"mord\"}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord text\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord\",\"children\":\"str\"}]}],[\"$\",\"span\",\"span-2\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-3\",{\"className\":\"mrel\",\"children\":\"=\"}],[\"$\",\"span\",\"span-4\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-5\",{\"className\":\"mord text\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord\",\"children\":\"strs\"}]}],[\"$\",\"span\",\"span-6\",{\"className\":\"mopen\",\"children\":\"[\"}],[\"$\",\"span\",\"span-7\",{\"className\":\"mord mathnormal\",\"children\":\"i\"}],[\"$\",\"span\",\"span-8\",{\"className\":\"mclose\",\"children\":\"]\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"span\",\"span-2\",{\"style\":{\"top\":\"-1.66em\"},\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"mord\"}],[\"$\",\"span\",\"span-1\",{\"className\":\"mord text\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"mord\",\"children\":\"for \"}]}],[\"$\",\"span\",\"span-2\",{\"className\":\"mopen\",\"children\":\"{\"}],[\"$\",\"span\",\"span-3\",{\"className\":\"mord mathnormal\",\"children\":\"i\"}],[\"$\",\"span\",\"span-4\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-5\",{\"className\":\"mrel\",\"children\":\"∣\"}],[\"$\",\"span\",\"span-6\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-7\",{\"className\":\"mord\",\"children\":\"1\"}],[\"$\",\"span\",\"span-8\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-9\",{\"className\":\"mrel\",\"children\":\"≤\"}],[\"$\",\"span\",\"span-10\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-11\",{\"className\":\"mord mathnormal\",\"children\":\"i\"}],[\"$\",\"span\",\"span-12\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-13\",{\"className\":\"mrel\",\"children\":\"≤\"}],[\"$\",\"span\",\"span-14\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",\"span-15\",{\"className\":\"mord\",\"children\":\"2\"}],[\"$\",\"span\",\"span-16\",{\"className\":\"mpunct\",\"children\":\",\"}],[\"$\",\"span\",\"span-17\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"-0.1667em\"}}],[\"$\",\"span\",\"span-18\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",\"span-19\",{\"className\":\"mord\",\"children\":\"000\"}],[\"$\",\"span\",\"span-20\",{\"className\":\"mpunct\",\"children\":\",\"}],[\"$\",\"span\",\"span-21\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"-0.1667em\"}}],[\"$\",\"span\",\"span-22\",{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",\"span-23\",{\"className\":\"mord\",\"children\":\"000\"}],[\"$\",\"span\",\"span-24\",{\"className\":\"mclose\",\"children\":\"}\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"1f:[\"$\",\"span\",\"span-1\",{\"className\":\"vlist-s\",\"children\":\"​\"}]\n20:[\"$\",\"span\",\"span-1\",{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",\"span-0\",{\"className\":\"vlist\",\"style\":{\"height\":\"2em\"},\"children\":[\"$\",\"span\",\"span-0\",{}]}]}]\n"])</script></body></html>